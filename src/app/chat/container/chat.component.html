<div *ngIf="error$ | async as error" style="color: darkred">
  {{error}}
</div>

<div *ngIf="chatClient; else NicknameNotSet">
  <h5>Hello</h5>
  <label>
    Message:
    <input type="text" [formControl]="messageFormControl">
  </label>

  <button (click)="sendMessage()">Send message</button>

  <h5 *ngIf="clientsTyping.length > 0" style="color: grey">
    <span *ngFor="let client of clientsTyping">
      {{client.nickname}}
    </span>
    typing...
  </h5>


  <h4 *ngFor="let chatMessage of messages">
    {{chatMessage.sender.nickname}}: {{chatMessage.message}}
  </h4>
</div>

<ng-template #NicknameNotSet>
  <div>
    <label>
      Enter nickname:
      <input type="text" [formControl]="nicknameFormControl">
    </label>
    <button (click)="addNickname()">Submit</button>
  </div>
</ng-template>

<div *ngIf="clients$ | async as clients">
  <ol>
    <li *ngFor="let client of clients">
      {{client.nickname}}
    </li>
  </ol>
</div>
